<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Made in Heaven Mezuzahs</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
  <style>
    /* ── Reset & Base ─────────────────────────────────────────────────────── */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Playfair Display', Georgia, serif;
      color: #1e3a58;
      min-height: 100vh;
    }

    #sky {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      object-fit: cover;   /* fills frame, no letterbox */
    }

    /* ── Navigation ───────────────────────────────────────────────────────── */
    nav {
      position: fixed;
      top: 0; left: 0; right: 0;
      z-index: 100;
      background: rgba(210, 235, 252, 0.70);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      border-bottom: 1px solid rgba(255,255,255,0.6);
    }

    .nav-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
      height: 64px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .nav-logo {
      font-family: 'Caveat', cursive;
      font-size: 1.55rem;
      font-weight: 600;
      color: #1e3a58;
      text-decoration: none;
      white-space: nowrap;
      cursor: pointer;
    }

    .nav-links {
      list-style: none;
      display: flex;
      gap: 36px;
    }

    .nav-links li a {
      font-family: 'Playfair Display', serif;
      font-size: 1rem;
      color: #1e3a58;
      text-decoration: none;
      cursor: pointer;
      position: relative;
      padding-bottom: 3px;
      transition: color 0.2s;
    }

    .nav-links li a::after {
      content: '';
      position: absolute;
      bottom: 0; left: 0;
      width: 0; height: 2px;
      background: #4499d4;
      transition: width 0.25s ease;
    }

    .nav-links li a:hover { color: #4499d4; }
    .nav-links li a:hover::after,
    .nav-links li a.active::after { width: 100%; }
    .nav-links li a.active { color: #4499d4; }

    /* Hamburger */
    .hamburger {
      display: none;
      background: none;
      border: none;
      cursor: pointer;
      padding: 6px;
      flex-direction: column;
      gap: 5px;
    }

    .hamburger span {
      display: block;
      width: 24px;
      height: 2px;
      background: #1e3a58;
      border-radius: 2px;
      transition: all 0.3s ease;
    }

    .hamburger.open span:nth-child(1) { transform: translateY(7px) rotate(45deg); }
    .hamburger.open span:nth-child(2) { opacity: 0; }
    .hamburger.open span:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }

    /* Mobile menu */
    .nav-mobile {
      display: none;
      flex-direction: column;
      background: rgba(210, 235, 252, 0.92);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      border-top: 1px solid rgba(255,255,255,0.5);
      padding: 8px 0 16px;
    }

    .nav-mobile.open { display: flex; }

    .nav-mobile a {
      font-family: 'Playfair Display', serif;
      font-size: 1.05rem;
      color: #1e3a58;
      text-decoration: none;
      padding: 12px 28px;
      cursor: pointer;
      transition: background 0.15s;
    }

    .nav-mobile a:hover { background: rgba(255,255,255,0.4); }
    .nav-mobile a.active { color: #4499d4; font-style: italic; }

    .nav-mobile-cta {
      display: block;
      font-family: 'Playfair Display', serif;
      font-size: 0.82rem;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      text-align: center;
      color: #fff !important;
      background: linear-gradient(135deg, #4499d4, #2277bb);
      border-radius: 22px;
      margin: 10px 20px 4px;
      padding: 12px 24px !important;
      text-decoration: none;
      box-shadow: 0 2px 12px rgba(34,119,187,0.28);
    }

    .nav-mobile-cta:hover {
      background: linear-gradient(135deg, #3388c8, #1a66aa) !important;
      opacity: 1 !important;
    }

    /* Nav right group */
    .nav-right {
      display: flex;
      align-items: center;
      gap: 28px;
    }

    /* Nav CTA */
    .nav-cta {
      font-family: 'Playfair Display', serif;
      font-size: 0.78rem;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: #fff;
      background: linear-gradient(135deg, #4499d4, #2277bb);
      border-radius: 22px;
      padding: 9px 20px;
      text-decoration: none;
      white-space: nowrap;
      box-shadow: 0 2px 12px rgba(34,119,187,0.28);
      transition: opacity 0.2s, transform 0.2s;
      flex-shrink: 0;
    }

    .nav-cta:hover { opacity: 0.88; transform: scale(1.03); }

    @media (max-width: 640px) {
      .nav-links { display: none; }
      .hamburger { display: flex; }
      .nav-right .nav-cta { display: none; }
    }

    /* ── Pages ────────────────────────────────────────────────────────────── */
    .page {
      display: none;
      position: relative;
      z-index: 1;
      padding-top: 64px; /* nav height */
      min-height: 100vh;
    }

    .page.active { display: block; }

    /* ── Hero ─────────────────────────────────────────────────────────────── */
    header {
      background: transparent;
      text-align: center;
      padding: 110px 20px 88px;
      position: relative;
      overflow: hidden;
    }

    header::before {
      content: '✡';
      position: absolute;
      font-size: 300px;
      opacity: 0.05;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      pointer-events: none;
      color: #5aaee8;
    }

    .brand-name {
      font-family: 'Caveat', cursive;
      font-size: clamp(2.8rem, 8vw, 5.2rem);
      font-weight: 600;
      color: #1e3a58;
      text-shadow: 0 2px 12px rgba(255,255,255,0.8);
      margin-bottom: 6px;
      line-height: 1.15;
      display: inline-block;
      transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      will-change: transform;
    }

    .brand-name span {
      color: #1a7fd4;
      font-size: 1.18em;
      text-shadow: 0 2px 18px rgba(30, 140, 220, 0.45), 0 0 32px rgba(255,255,255,0.95), 0 0 60px rgba(255,255,255,0.6);
    }

    .brand-artist {
      font-family: 'Playfair Display', serif;
      font-size: clamp(0.95rem, 2vw, 1.1rem);
      color: #3d6a96;
      margin-bottom: 10px;
      letter-spacing: 0.06em;
    }

    .tagline {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1rem, 2.5vw, 1.2rem);
      color: #1e3a58;
      font-style: italic;
      margin-bottom: 28px;
      display: inline-block;
      background: rgba(255,255,255,0.50);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.7);
      border-radius: 24px;
      padding: 7px 22px;
      text-shadow: 0 1px 6px rgba(255,255,255,0.6);
    }

    .divider {
      width: 80px;
      height: 2px;
      background: linear-gradient(90deg, transparent, #5aaee8, transparent);
      margin: 0 auto;
    }

    /* ── Gallery ──────────────────────────────────────────────────────────── */
    .gallery-section {
      background: rgba(225, 241, 252, 0.52);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      padding: 60px 24px;
      border-top: 1px solid rgba(255,255,255,0.7);
      border-bottom: 1px solid rgba(255,255,255,0.7);
    }

    .gallery-section h2 {
      font-family: 'Playfair Display', serif;
      font-weight: 700;
      text-align: center;
      font-size: 1.9rem;
      color: #1e3a58;
      margin-bottom: 24px;
      text-shadow: 0 1px 8px rgba(255,255,255,0.7);
    }

    /* ── Filter Sidebar ──────────────────────────────────────────────────── */
    .gallery-layout {
      display: flex;
      gap: 32px;
      max-width: 1200px;
      margin: 0 auto;
      align-items: flex-start;
    }

    .filter-sidebar {
      width: 200px;
      flex-shrink: 0;
      position: sticky;
      top: 84px;
      background: rgba(255,255,255,0.68);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      border: 1px solid rgba(255,255,255,0.9);
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(80,140,200,0.10);
      padding: 20px 16px;
    }

    .filter-section-title {
      font-family: 'Playfair Display', serif;
      font-size: 0.7rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: #6699cc;
      margin: 0 0 10px;
      padding-bottom: 6px;
      border-bottom: 1px solid rgba(68,153,212,0.15);
    }

    .filter-section-title:not(:first-child) { margin-top: 16px; }

    .filter-check-label {
      display: flex;
      align-items: center;
      gap: 8px;
      font-family: 'Playfair Display', serif;
      font-size: 0.80rem;
      color: #2d5070;
      cursor: pointer;
      padding: 5px 4px;
      border-radius: 8px;
      transition: background 0.15s;
      line-height: 1.3;
    }

    .filter-check-label:hover { background: rgba(68,153,212,0.08); }

    .filter-check-label input[type="checkbox"] {
      accent-color: #4499d4;
      width: 14px;
      height: 14px;
      flex-shrink: 0;
      cursor: pointer;
    }

    .filter-check-gold  { color: #7a5a08; }
    .filter-check-new   { color: #1a6b3a; }

    .filter-sidebar-divider {
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(100,160,220,0.25), transparent);
      margin: 14px 0;
    }

    .filter-clear-btn {
      display: none;
      width: 100%;
      margin-top: 14px;
      font-family: 'Playfair Display', serif;
      font-size: 0.75rem;
      color: #4499d4;
      background: none;
      border: 1px solid rgba(68,153,212,0.3);
      border-radius: 10px;
      padding: 5px 10px;
      cursor: pointer;
      transition: background 0.15s;
    }

    .filter-clear-btn:hover { background: rgba(68,153,212,0.08); }
    .filter-clear-btn.visible { display: block; }

    /* Mobile filter toggle button */
    .filter-toggle {
      display: none;
    }

    /* Filter overlay (mobile backdrop) */
    .filter-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.32);
      z-index: 8999;
    }

    .filter-overlay.open { display: block; }

    @media (max-width: 820px) {
      .gallery-layout { flex-direction: column; gap: 0; align-items: stretch; }

      .filter-toggle {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        font-family: 'Playfair Display', serif;
        font-size: 0.92rem;
        letter-spacing: 0.04em;
        color: #2d5070;
        background: rgba(255,255,255,0.85);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border: 1.5px solid rgba(68,153,212,0.3);
        border-radius: 24px;
        padding: 12px 32px;
        margin: 0 auto 20px;
        cursor: pointer;
        box-shadow: 0 2px 10px rgba(80,140,200,0.13);
        min-width: 140px;
      }

      /* Bottom sheet */
      .filter-sidebar {
        position: fixed;
        bottom: -100%;
        left: 0;
        right: 0;
        width: 100%;
        max-height: 72vh;
        top: auto;
        z-index: 9000;
        border-radius: 20px 20px 0 0;
        overflow-y: auto;
        overflow-x: hidden;
        transition: bottom 0.32s cubic-bezier(0.4, 0, 0.2, 1);
        padding: 0 20px 40px;
      }

      .filter-sidebar.open { bottom: 0; }

      /* Drag pill at top of sheet */
      .filter-sidebar::before {
        content: '';
        display: block;
        width: 40px;
        height: 4px;
        background: rgba(100,150,210,0.3);
        border-radius: 2px;
        margin: 12px auto 0;
      }

      /* Sheet header row (title + close) */
      .filter-sheet-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 16px 0 14px;
        border-bottom: 1px solid rgba(68,153,212,0.12);
        margin-bottom: 6px;
      }

      .filter-sheet-title {
        font-family: 'Playfair Display', serif;
        font-size: 1.05rem;
        font-weight: 700;
        color: #1e3a58;
        letter-spacing: 0.02em;
      }

      /* Bigger touch targets for filter options */
      .filter-check-label {
        font-size: 0.95rem;
        padding: 10px 8px;
        gap: 12px;
      }

      .filter-check-label input[type="checkbox"] {
        width: 20px;
        height: 20px;
      }

      /* Bigger clear button */
      .filter-clear-btn {
        font-size: 0.88rem;
        padding: 11px 10px;
        border-radius: 12px;
        margin-top: 18px;
      }

      .filter-section-title:not(:first-child) { margin-top: 20px; }
    }

    /* Sheet header (hidden on desktop, flex on mobile via media query above) */
    .filter-sheet-header { display: none; }
    .filter-sheet-title  { display: none; }

    /* Close button inside sidebar (mobile only) */
    .filter-sidebar-close {
      display: none;
      background: rgba(68,153,212,0.10);
      border: 1px solid rgba(68,153,212,0.20);
      border-radius: 50%;
      width: 32px;
      height: 32px;
      font-size: 1.15rem;
      color: #3d6a96;
      cursor: pointer;
      align-items: center;
      justify-content: center;
      line-height: 1;
      transition: background 0.15s;
      flex-shrink: 0;
    }

    .filter-sidebar-close:hover { background: rgba(68,153,212,0.20); }

    @media (max-width: 820px) {
      .filter-sidebar-close { display: flex; }
    }

    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 28px;
      flex: 1;
      min-width: 0;
      width: 100%;
    }

    @media (max-width: 820px) {
      .gallery {
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
      }
    }

    @media (max-width: 480px) {
      .gallery {
        grid-template-columns: 1fr;
        gap: 16px;
      }
    }

    .gallery-card {
      background: rgba(255,255,255,0.72);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.9);
      box-shadow: 0 4px 20px rgba(80,140,200,0.10);
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .gallery-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 14px 40px rgba(80,140,200,0.22);
    }

    .gallery-card img {
      width: 100%;
      height: auto;
      max-height: 420px;
      min-height: 200px;
      object-fit: contain;
      background: rgba(235, 244, 252, 0.55);
      display: block;
      padding: 12px 12px 0;
      transition: transform 0.4s ease;
    }

    .gallery-card:hover img { transform: scale(1.03); }

    /* Card entrance animation */
    @keyframes cardIn {
      from { opacity: 0; transform: translateY(18px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .gallery-card {
      animation: cardIn 0.4s ease both;
    }

    /* Category tags on card */
    .card-tags {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 5px;
      margin-bottom: 12px;
    }

    .card-tag {
      font-family: 'Playfair Display', serif;
      font-size: 0.7rem;
      letter-spacing: 0.04em;
      color: #3d6a96;
      background: rgba(68,153,212,0.10);
      border: 1px solid rgba(68,153,212,0.22);
      border-radius: 10px;
      padding: 2px 10px;
    }

    .card-tag-gold {
      color: #7a5a08;
      background: rgba(201,151,26,0.13);
      border-color: rgba(201,151,26,0.28);
    }

    /* Silver/platinum for Porcelain and Extra Large tags */
    .card-tag-premium {
      color: #3c4460;
      background: linear-gradient(135deg, rgba(210,218,232,0.55), rgba(190,198,218,0.45));
      border-color: rgba(160,170,195,0.55);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.65), 0 1px 3px rgba(100,110,140,0.15);
      font-weight: 600;
    }

    /* "New Arrival" badge — sits inline next to the product name */
    .card-badge-new {
      display: inline-block;
      font-family: 'Playfair Display', serif;
      font-size: 0.58rem;
      letter-spacing: 0.09em;
      text-transform: uppercase;
      color: #1a6b3a;
      background: rgba(30,150,80,0.13);
      border: 1px solid rgba(30,150,80,0.32);
      border-radius: 10px;
      padding: 2px 8px;
      font-weight: 600;
      vertical-align: middle;
      margin-left: 7px;
      position: relative;
      top: -1px;
    }

    /* Video badge on gallery card */
    .card-video-badge {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0,0,0,0.48);
      color: #fff;
      font-size: 0.7rem;
      border-radius: 6px;
      padding: 2px 7px;
      pointer-events: none;
    }

    .gallery-card { position: relative; }

    .gallery-card video {
      width: 100%;
      height: auto;
      max-height: 420px;
      min-height: 200px;
      object-fit: contain;
      background: rgba(235, 244, 252, 0.55);
      display: block;
      padding: 12px 12px 0;
    }

    .card-caption { padding: 18px 20px 22px; text-align: center; }

    .card-caption h3 {
      font-family: 'Playfair Display', serif;
      font-weight: 700;
      font-size: 1.1rem;
      color: #1e3a58;
      margin-bottom: 5px;
    }

    .card-caption p {
      font-family: 'Playfair Display', serif;
      font-size: 0.88rem;
      color: #4a7aa8;
      font-style: italic;
      margin-bottom: 10px;
    }

    .card-price {
      font-family: 'Playfair Display', serif;
      font-size: 1.05rem;
      font-weight: 700;
      color: #2277bb;
      margin-bottom: 14px;
      letter-spacing: 0.02em;
    }

    .btn-view {
      display: inline-block;
      font-family: 'Playfair Display', serif;
      font-size: 0.82rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: #fff;
      background: linear-gradient(135deg, #4499d4, #2277bb);
      border: none;
      border-radius: 20px;
      padding: 8px 22px;
      cursor: pointer;
      transition: opacity 0.2s, transform 0.2s;
    }

    .btn-view:hover { opacity: 0.88; transform: scale(1.03); }

    @media (max-width: 820px) {
      .gallery-section { padding: 40px 16px; }
      .gallery-section h2 { font-size: 1.6rem; margin-bottom: 16px; }
    }

    /* ── About Page ───────────────────────────────────────────────────────── */
    .about-page {
      max-width: 820px;
      margin: 60px auto;
      padding: 0 24px;
    }

    .about-card {
      background: rgba(255,255,255,0.62);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-radius: 24px;
      border: 1px solid rgba(255,255,255,0.85);
      box-shadow: 0 8px 36px rgba(80,140,200,0.10);
      padding: 52px 56px;
      text-align: center;
    }

    @media (max-width: 600px) {
      .about-card { padding: 36px 28px; }
    }

    .about-star {
      font-size: 2.2rem;
      color: #5aaee8;
      margin-bottom: 16px;
      display: block;
    }

    .about-card h2 {
      font-family: 'Playfair Display', serif;
      font-size: 2rem;
      font-weight: 700;
      color: #1e3a58;
      margin-bottom: 6px;
    }

    .about-card .artist-name {
      font-family: 'Caveat', cursive;
      font-size: 1.7rem;
      font-weight: 600;
      color: #4499d4;
      margin-bottom: 28px;
      display: block;
    }

    .about-divider {
      width: 60px;
      height: 2px;
      background: linear-gradient(90deg, transparent, #5aaee8, transparent);
      margin: 0 auto 28px;
    }

    .about-card p {
      font-family: 'Playfair Display', serif;
      font-size: 1.05rem;
      line-height: 1.9;
      color: #2d5070;
      margin-bottom: 18px;
      text-align: left;
    }

    .about-card p:last-child { margin-bottom: 0; }

    .about-quote {
      font-style: italic;
      font-size: 1.12rem !important;
      color: #3d6a96 !important;
      text-align: center !important;
      border-left: 3px solid #88c4e8;
      padding-left: 20px;
      margin: 28px 0 !important;
    }

    /* ── Contact Page ─────────────────────────────────────────────────────── */
    .contact-page {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: calc(100vh - 64px);
      padding: 60px 24px;
    }

    .contact-card-wrap {
      background: rgba(255,255,255,0.60);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      border-radius: 28px;
      border: 1px solid rgba(255,255,255,0.85);
      box-shadow: 0 8px 40px rgba(80,150,220,0.15);
      padding: 52px 64px;
      max-width: 540px;
      width: 100%;
      text-align: center;
    }

    @media (max-width: 600px) {
      .contact-card-wrap { padding: 40px 28px; }
    }

    .contact-card-wrap h2 {
      font-family: 'Playfair Display', serif;
      font-weight: 700;
      font-size: 1.9rem;
      color: #1e3a58;
      margin-bottom: 10px;
    }

    .contact-card-wrap .subtitle {
      font-family: 'Playfair Display', serif;
      font-style: italic;
      font-size: 1rem;
      color: #4a7aa8;
      margin-bottom: 32px;
    }

    .contact-divider {
      width: 60px;
      height: 2px;
      background: linear-gradient(90deg, transparent, #5aaee8, transparent);
      margin: 0 auto 32px;
    }

    .contact-label {
      font-family: 'Playfair Display', serif;
      font-size: 0.8rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #6699cc;
      margin-bottom: 10px;
    }

    .contact-phone {
      display: block;
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.8rem, 5vw, 2.4rem);
      color: #2277bb;
      text-decoration: none;
      font-weight: 700;
      letter-spacing: 0.04em;
      transition: color 0.2s;
      text-shadow: 0 1px 6px rgba(255,255,255,0.6);
      margin-bottom: 8px;
    }

    .contact-phone:hover { color: #1155aa; }

    .contact-sub {
      font-family: 'Playfair Display', serif;
      font-size: 0.92rem;
      color: #5588bb;
      font-style: italic;
    }

    /* ── Detail Modal ─────────────────────────────────────────────────────── */
    .modal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      z-index: 200;
      background: rgba(10, 30, 60, 0.55);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .modal-overlay.open { display: flex; }

    .modal-box {
      background: rgba(240, 250, 255, 0.92);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.9);
      box-shadow: 0 20px 60px rgba(20, 60, 120, 0.25);
      max-width: 860px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      display: flex;
      flex-direction: row;
      position: relative;
    }

    @media (max-width: 640px) {
      .modal-box { flex-direction: column; }
    }

    .modal-close {
      position: absolute;
      top: 14px; right: 16px;
      background: rgba(255,255,255,0.7);
      border: none;
      border-radius: 50%;
      width: 36px; height: 36px;
      font-size: 1.1rem;
      color: #1e3a58;
      cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      z-index: 10;
      transition: background 0.2s;
    }

    .modal-close:hover { background: rgba(255,255,255,1); }

    .modal-img-wrap {
      flex: 0 0 48%;
      min-height: 340px;
    }

    .modal-img-wrap img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: 20px 0 0 20px;
      display: block;
      background: rgba(235, 244, 252, 0.7);
    }

    /* Thumbnail strip for multi-image products */
    .modal-thumbs {
      display: none;
      flex-wrap: wrap;
      gap: 6px;
      justify-content: center;
      padding: 8px 8px 10px;
      background: rgba(20,50,90,0.12);
    }

    .modal-thumb {
      width: 44px;
      height: 44px;
      object-fit: cover;
      border-radius: 6px;
      cursor: pointer;
      border: 2px solid transparent;
      opacity: 0.6;
      transition: opacity 0.2s, border-color 0.2s;
    }

    .modal-thumb:hover { opacity: 0.9; }

    .modal-thumb.active {
      border-color: #4499d4;
      opacity: 1;
    }

    @media (max-width: 640px) {
      .modal-img-wrap { flex: none; min-height: 0; max-height: 40vh; overflow: hidden; }
      .modal-img-wrap img { border-radius: 20px 20px 0 0; height: 40vh; }
    }

    .modal-info {
      flex: 1;
      padding: 44px 36px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    @media (max-width: 640px) {
      .modal-info { padding: 28px 24px; }
    }

    .modal-info h2 {
      font-family: 'Caveat', cursive;
      font-size: 2.2rem;
      font-weight: 600;
      color: #1e3a58;
      margin-bottom: 8px;
    }

    .modal-info .modal-tagline {
      font-family: 'Playfair Display', serif;
      font-style: italic;
      font-size: 0.95rem;
      color: #4a7aa8;
      margin-bottom: 20px;
    }

    .modal-divider {
      width: 48px;
      height: 2px;
      background: linear-gradient(90deg, #5aaee8, transparent);
      margin-bottom: 20px;
    }

    .modal-price {
      font-family: 'Playfair Display', serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: #2277bb;
      margin-bottom: 20px;
      letter-spacing: 0.01em;
    }

    .modal-info p {
      font-family: 'Playfair Display', serif;
      font-size: 1rem;
      line-height: 1.85;
      color: #2d5070;
      margin-bottom: 28px;
    }

    .modal-cta {
      display: inline-block;
      font-family: 'Playfair Display', serif;
      font-size: 0.95rem;
      color: #fff;
      background: linear-gradient(135deg, #4499d4, #2277bb);
      border-radius: 24px;
      padding: 12px 28px;
      text-decoration: none;
      font-weight: 700;
      letter-spacing: 0.02em;
      transition: opacity 0.2s, transform 0.2s;
      align-self: flex-start;
    }

    .modal-cta:hover { opacity: 0.88; transform: scale(1.03); }

    /* ── Custom Order Page ────────────────────────────────────────────────── */
    .custom-order-page {
      max-width: 660px;
      margin: 60px auto;
      padding: 0 24px;
    }

    .custom-order-card {
      background: rgba(255,255,255,0.62);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-radius: 24px;
      border: 1px solid rgba(255,255,255,0.85);
      box-shadow: 0 8px 36px rgba(80,140,200,0.10);
      padding: 52px 56px;
      text-align: center;
    }

    @media (max-width: 600px) {
      .custom-order-card { padding: 36px 24px; }
    }

    .custom-order-card h2 {
      font-family: 'Playfair Display', serif;
      font-size: 2rem;
      font-weight: 700;
      color: #1e3a58;
      margin-bottom: 8px;
    }

    .custom-order-subtitle {
      font-family: 'Playfair Display', serif;
      font-style: italic;
      font-size: 1rem;
      color: #4a7aa8;
      margin-bottom: 0;
    }

    .co-form { text-align: left; margin-top: 32px; }

    .co-group { margin-bottom: 18px; }

    .co-label {
      display: block;
      font-family: 'Playfair Display', serif;
      font-size: 0.78rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #6699cc;
      margin-bottom: 6px;
    }

    .co-input, .co-textarea, .co-select {
      width: 100%;
      font-family: 'Playfair Display', serif;
      font-size: 1rem;
      color: #1e3a58;
      background: rgba(255,255,255,0.72);
      border: 1px solid rgba(68,153,212,0.28);
      border-radius: 10px;
      padding: 10px 14px;
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
      box-sizing: border-box;
    }

    .co-input:focus, .co-textarea:focus, .co-select:focus {
      border-color: #4499d4;
      box-shadow: 0 0 0 3px rgba(68,153,212,0.12);
    }

    .co-textarea { resize: vertical; min-height: 90px; }

    .co-select { cursor: pointer; appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='%236699cc' d='M1 1l5 5 5-5'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 12px center; padding-right: 32px; }

    .btn-co-submit {
      display: inline-block;
      width: 100%;
      font-family: 'Playfair Display', serif;
      font-size: 1rem;
      font-weight: 700;
      letter-spacing: 0.06em;
      color: #fff;
      background: linear-gradient(135deg, #4499d4, #2277bb);
      border: none;
      border-radius: 24px;
      padding: 13px 28px;
      cursor: pointer;
      transition: opacity 0.2s, transform 0.2s;
      margin-top: 8px;
      box-shadow: 0 4px 18px rgba(34,119,187,0.30);
    }

    .btn-co-submit:hover:not(:disabled) { opacity: 0.88; transform: scale(1.01); }
    .btn-co-submit:disabled { opacity: 0.55; cursor: not-allowed; }

    .co-success, .co-error {
      display: none;
      text-align: center;
      padding: 20px 0;
    }

    .co-success-icon {
      font-size: 2.8rem;
      color: #2db86a;
      margin-bottom: 12px;
    }

    .co-success h3 {
      font-family: 'Playfair Display', serif;
      font-size: 1.4rem;
      font-weight: 700;
      color: #1e3a58;
      margin-bottom: 8px;
    }

    .co-success p {
      font-family: 'Playfair Display', serif;
      font-size: 1rem;
      color: #2d5070;
      line-height: 1.7;
      margin-bottom: 0;
    }

    .co-success-divider {
      width: 48px;
      height: 2px;
      background: linear-gradient(90deg, transparent, #5aaee8, transparent);
      margin: 20px auto;
    }

    .co-success-cta-text {
      font-family: 'Playfair Display', serif;
      font-size: 0.92rem;
      color: #4a7aa8;
      font-style: italic;
      margin-bottom: 14px !important;
    }

    .btn-co-call {
      display: inline-block;
      font-family: 'Playfair Display', serif;
      font-size: 1rem;
      font-weight: 700;
      letter-spacing: 0.04em;
      color: #fff;
      background: linear-gradient(135deg, #2db86a, #1a8a48);
      border: none;
      border-radius: 24px;
      padding: 12px 30px;
      text-decoration: none;
      box-shadow: 0 4px 18px rgba(30,150,80,0.32);
      transition: opacity 0.2s, transform 0.2s;
    }

    .btn-co-call:hover { opacity: 0.9; transform: scale(1.02); }

    .co-error p {
      font-family: 'Playfair Display', serif;
      font-size: 1rem;
      color: #b54040;
    }

    /* ── Footer ───────────────────────────────────────────────────────────── */
    footer {
      background: rgba(20, 50, 90, 0.82);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      color: #a8caec;
      text-align: center;
      padding: 24px 16px;
      font-size: 0.85rem;
      position: relative;
      z-index: 1;
    }

    footer .star { color: #7ab8e8; margin: 0 6px; }

    /* Active filter count badge on the Filter toggle button */
    .filter-count-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: #4499d4;
      color: #fff;
      border-radius: 50%;
      min-width: 20px;
      height: 20px;
      font-size: 0.72rem;
      font-weight: 700;
      margin-left: 2px;
      padding: 0 3px;
      line-height: 1;
    }
  </style>
</head>
<body>

  <video id="sky" autoplay muted loop playsinline aria-hidden="true">
    <source src="images/sky-background.mp4" type="video/mp4">
  </video>

  <!-- ── Navigation ── -->
  <nav>
    <div class="nav-inner">
      <span class="nav-logo" onclick="showPage('home')">Made in Heaven Mezuzahs</span>
      <div class="nav-right">
        <ul class="nav-links" id="nav-links">
          <li><a id="nav-home"         onclick="showPage('home')"         class="active">Home</a></li>
          <li><a id="nav-about"        onclick="showPage('about')"                   >About</a></li>
          <li><a id="nav-custom-order" onclick="showPage('custom-order')"            >Custom Order</a></li>
          <li><a id="nav-contact"      onclick="showPage('contact')"                 >Contact</a></li>
        </ul>
        <a class="nav-cta" href="tel:+12246452752">&#128222;&nbsp; Call to Order</a>
      </div>
      <button class="hamburger" id="hamburger" onclick="toggleMobile()" aria-label="Menu">
        <span></span><span></span><span></span>
      </button>
    </div>
    <div class="nav-mobile" id="nav-mobile">
      <a id="mob-home"         onclick="showPage('home');         toggleMobile()" class="active">Home</a>
      <a id="mob-about"        onclick="showPage('about');        toggleMobile()"              >About</a>
      <a id="mob-custom-order" onclick="showPage('custom-order'); toggleMobile()"              >Custom Order</a>
      <a id="mob-contact"      onclick="showPage('contact');      toggleMobile()"              >Contact</a>
      <a class="nav-mobile-cta" href="tel:+12246452752">&#128222;&nbsp; Call to Order</a>
    </div>
  </nav>

  <!-- ══════════════════════════════════════════════════════════════════════ -->
  <!-- HOME PAGE                                                              -->
  <!-- ══════════════════════════════════════════════════════════════════════ -->
  <div id="page-home" class="page active">

    <header>
      <h1 class="brand-name">Made in <span>Heaven</span> Mezuzahs</h1>
      <p class="brand-artist">by Sorah Weiss</p>
      <p class="tagline">Original &ldquo;One of a Kind&rdquo; Handmade Mezuzahs</p>
      <div class="divider"></div>
    </header>

    <section class="gallery-section">
      <h2>Our Collection</h2>
      <button class="filter-toggle" id="filter-toggle" onclick="toggleFilterSidebar()">&#9776;&nbsp; Filter</button>
      <div class="gallery-layout">
        <aside class="filter-sidebar" id="filter-sidebar">
          <!-- Built by JS -->
        </aside>
        <div class="gallery" id="gallery">
          <!-- Cards are rendered from data/mezuzahs.js -->
        </div>
      </div>
      <div class="filter-overlay" id="filter-overlay" onclick="toggleFilterSidebar()"></div>
    </section>

    <footer>
      <p>
        <span class="star">✡</span>
        &copy; 2026 Made in Heaven Mezuzahs &mdash; Sorah Weiss
        <span class="star">✡</span>
      </p>
    </footer>
  </div>

  <!-- ══════════════════════════════════════════════════════════════════════ -->
  <!-- ABOUT PAGE                                                             -->
  <!-- ══════════════════════════════════════════════════════════════════════ -->
  <div id="page-about" class="page">
    <div class="about-page">
      <div class="about-card">
        <span class="about-star">✡</span>
        <h2>About the Artist</h2>
        <span class="artist-name">Sorah Weiss</span>
        <div class="about-divider"></div>
        <!-- Rendered from data/site-content.js -->
        <p class="about-quote" id="about-quote"></p>
        <div id="about-bio"></div>
      </div>
    </div>
    <footer>
      <p>
        <span class="star">✡</span>
        &copy; 2026 Made in Heaven Mezuzahs &mdash; Sorah Weiss
        <span class="star">✡</span>
      </p>
    </footer>
  </div>

  <!-- ══════════════════════════════════════════════════════════════════════ -->
  <!-- CONTACT PAGE                                                           -->
  <!-- ══════════════════════════════════════════════════════════════════════ -->
  <div id="page-contact" class="page">
    <div class="contact-page">
      <div class="contact-card-wrap">
        <h2>Let&rsquo;s Connect</h2>
        <p class="subtitle">by Sorah Weiss</p>
        <div class="contact-divider"></div>
        <!-- Rendered from data/site-content.js -->
        <p id="contact-intro" style="font-family:'Playfair Display',serif; font-size:1.02rem; color:#2d5070; line-height:1.75; margin-bottom:32px;"></p>
        <div class="contact-label">Call or Text</div>
        <a class="contact-phone" id="contact-phone" href="tel:+12246452752"></a>
        <p class="contact-sub" id="contact-subtext"></p>
      </div>
    </div>
    <footer>
      <p>
        <span class="star">✡</span>
        &copy; 2026 Made in Heaven Mezuzahs &mdash; Sorah Weiss
        <span class="star">✡</span>
      </p>
    </footer>
  </div>

  <!-- ══════════════════════════════════════════════════════════════════════ -->
  <!-- CUSTOM ORDER PAGE                                                      -->
  <!-- ══════════════════════════════════════════════════════════════════════ -->
  <div id="page-custom-order" class="page">
    <div class="custom-order-page">
      <div class="custom-order-card">
        <span class="about-star">✡</span>
        <h2>Custom Order</h2>
        <p class="custom-order-subtitle">Every mezuzah is one of a kind &mdash; let&rsquo;s create yours.</p>
        <div class="about-divider"></div>

        <form class="co-form" id="custom-order-form">
          <div class="co-group">
            <label class="co-label" for="co-name">Your Name *</label>
            <input class="co-input" id="co-name" type="text" placeholder="e.g. Rebecca Cohen" required />
          </div>

          <div class="co-group">
            <label class="co-label" for="co-contact">Phone or Email *</label>
            <input class="co-input" id="co-contact" type="text" placeholder="Best way to reach you" required />
          </div>

          <div class="co-group">
            <label class="co-label" for="co-size">Preferred Size</label>
            <select class="co-select" id="co-size">
              <option value="">No preference / not sure</option>
              <option value='Small (4")'>Small (4&Prime;)</option>
              <option value='Medium (5-7")'>Medium (5&ndash;7&Prime;)</option>
              <option value='Large (8-10")'>Large (8&ndash;10&Prime;)</option>
              <option value='Extra Large (12"+)'>Extra Large (12&Prime;+)</option>
            </select>
          </div>

          <div class="co-group">
            <label class="co-label" for="co-description">What are you envisioning? *</label>
            <textarea class="co-textarea" id="co-description" placeholder="Describe the design, theme, colors, or feeling you have in mind…" required></textarea>
          </div>

          <div class="co-group">
            <label class="co-label" for="co-details">Any other details?</label>
            <textarea class="co-textarea" id="co-details" placeholder="Special occasion, timeline, budget, or anything else to share…" style="min-height:70px;"></textarea>
          </div>

          <button class="btn-co-submit" type="submit" id="co-submit-btn">&#128222;&nbsp; Send My Request</button>
        </form>

        <div class="co-success" id="co-success">
          <div class="co-success-icon">&#10003;</div>
          <h3>Your request has been sent!</h3>
          <p>Sorah will review it and get back to you soon.</p>
          <div class="co-success-divider"></div>
          <p class="co-success-cta-text">For immediate service, give Sorah a call:</p>
          <a class="btn-co-call" href="tel:+12246452752">&#128222;&nbsp; Call (224) 645-2752</a>
        </div>

        <div class="co-error" id="co-error">
          <p>Something went wrong sending your request.<br>
          Please call or text directly: <a href="tel:+12246452752" style="color:#2277bb; font-weight:700;">(224) 645-2752</a></p>
        </div>
      </div>
    </div>
    <footer>
      <p>
        <span class="star">✡</span>
        &copy; 2026 Made in Heaven Mezuzahs &mdash; Sorah Weiss
        <span class="star">✡</span>
      </p>
    </footer>
  </div>

  <!-- ══════════════════════════════════════════════════════════════════════ -->
  <!-- DETAIL MODAL                                                           -->
  <!-- ══════════════════════════════════════════════════════════════════════ -->
  <div class="modal-overlay" id="modal-overlay" onclick="closeModalOnBg(event)">
    <div class="modal-box">
      <button class="modal-close" onclick="closeModal()">&#x2715;</button>
      <div class="modal-img-wrap">
        <img id="modal-img" src="" alt="">
        <video id="modal-video" src="" muted controls playsinline style="display:none; width:100%; height:100%; object-fit:contain; border-radius:20px 0 0 20px; background:rgba(235,244,252,0.7);"></video>
        <div class="modal-thumbs" id="modal-thumbs"></div>
      </div>
      <div class="modal-info">
        <h2 id="modal-name"></h2>
        <p class="modal-tagline" id="modal-tagline"></p>
        <div class="modal-divider"></div>
        <p class="modal-price" id="modal-price"></p>
        <p id="modal-desc"></p>
        <a class="modal-cta" href="tel:+12246452752">&#128222;&nbsp; Call to Order</a>
      </div>
    </div>
  </div>

<script src="data/site-content.js"></script>
<script src="data/mezuzahs.js"></script>
<script>
/* ── About & Contact page renderer ──────────────────────────────────────── */
(function() {
  var a = SITE_CONTENT.about;
  document.getElementById('about-quote').textContent = '\u201c' + a.quote + '\u201d';
  var bio = document.getElementById('about-bio');
  a.paragraphs.forEach(function(text) {
    var p = document.createElement('p');
    p.textContent = text;
    bio.appendChild(p);
  });

  var c = SITE_CONTENT.contact;
  document.getElementById('contact-intro').textContent = c.intro;
  var phone = document.getElementById('contact-phone');
  phone.textContent = c.phone;
  phone.href = c.phoneHref;
  document.getElementById('contact-subtext').textContent = c.subtext;
})();

/* ── Helpers ────────────────────────────────────────────────────────────── */
function isVideo(src) {
  return /\.(mp4|mov|webm|ogg|m4v)$/i.test(src);
}

/* ── Gallery renderer ────────────────────────────────────────────────────── */
function renderGallery(items) {
  const gallery = document.getElementById('gallery');
  const list    = items !== undefined ? items : MEZUZAHS;
  gallery.innerHTML = list.map(function(m, i) {
    const idx      = MEZUZAHS.indexOf(m);
    const tag      = m.tagline.replace(/&/g, '&amp;');
    const price    = m.price || 0;
    const cats     = m.categories || [];
    // Support both new images[] and legacy image string
    const firstMedia = (m.images && m.images[0]) || m.image || '';
    const isVid = isVideo(firstMedia);

    // "New Arrival" badge (inline, next to product name)
    const isNew    = cats.some(function(c) { return c.toLowerCase().includes('new'); });
    const newBadge = isNew ? ' <span class="card-badge-new">&#10022;&nbsp;New Arrival</span>' : '';

    // Tags row — exclude "New Arrival", apply premium styling for Porcelain/Extra Large
    const tags = cats.filter(function(c) { return !c.toLowerCase().includes('new'); }).map(function(c) {
      var l   = c.toLowerCase();
      var cls = 'card-tag';
      if (l.includes('gold'))                         cls = 'card-tag card-tag-gold';
      else if (l.includes('porcelain') || l.includes('extra large')) cls = 'card-tag card-tag-premium';
      return '<span class="' + cls + '">' + c + '</span>';
    }).join('');

    const mediaBadge = isVid ? '<span class="card-video-badge">&#9658; Video</span>' : '';
    const mediaEl = isVid
      ? '<video src="' + firstMedia + '" autoplay muted loop playsinline></video>'
      : '<img src="' + firstMedia + '" alt="' + m.name + '">';

    return '<div class="gallery-card" data-idx="' + idx + '" style="animation-delay:' + (i * 0.07) + 's">' +
      mediaBadge +
      mediaEl +
      '<div class="card-caption">' +
        '<h3>' + m.name + newBadge + '</h3>' +
        '<p>' + tag + '</p>' +
        '<div class="card-tags">' + tags + '</div>' +
        '<p class="card-price">$' + price + '</p>' +
        '<button class="btn-view">View Details</button>' +
      '</div>' +
    '</div>';
  }).join('');
}

/* ── Gallery click handler (avoids inline onclick with unsafe strings) ────── */
document.getElementById('gallery').addEventListener('click', function(e) {
  const card = e.target.closest('.gallery-card');
  if (!card) return;
  const m = MEZUZAHS[+card.dataset.idx];
  if (m) {
    // Support both new images[] and legacy image string
    const images = m.images || (m.image ? [m.image] : []);
    openModal(m.name, images, m.tagline, m.description.replace(/\n\s*/g, ' ').trim(), m.price || 0);
  }
});

/* ── Filter sidebar ──────────────────────────────────────────────────────── */
(function() {
  var cats     = (SITE_CONTENT && SITE_CONTENT.categories) || {};
  var sizes    = cats.sizes    || ['Small (4\u2033)', 'Medium (5-7\u2033)', 'Large (8-10\u2033)', 'Extra Large (12\u2033+)'];
  var specials = cats.specials || ['With Gold Leaf', 'New Arrival'];

  var activeSizes    = new Set();
  var activeSpecials = new Set();

  function applyFilters() {
    var results = MEZUZAHS.filter(function(m) {
      var mCats  = m.categories || [];
      var sizeOk = activeSizes.size === 0 || mCats.some(function(c) { return activeSizes.has(c); });
      var specOk = activeSpecials.size === 0 || Array.from(activeSpecials).every(function(s) { return mCats.includes(s); });
      return sizeOk && specOk;
    });
    renderGallery(results);
    updateClearBtn();
  }

  function updateClearBtn() {
    var btn = document.getElementById('filter-clear-btn');
    if (!btn) return;
    var count = activeSizes.size + activeSpecials.size;
    btn.classList.toggle('visible', count > 0);
    // Show active count on the Filter toggle button
    var toggleBtn = document.getElementById('filter-toggle');
    if (toggleBtn) {
      toggleBtn.innerHTML = count > 0
        ? '&#9776;&nbsp; Filters <span class="filter-count-badge">' + count + '</span>'
        : '&#9776;&nbsp; Filter';
    }
  }

  function makeSection(title) {
    var h = document.createElement('p');
    h.className = 'filter-section-title';
    h.textContent = title;
    return h;
  }

  function makeCheckbox(label, isSpecial) {
    var lbl = document.createElement('label');
    var l   = label.toLowerCase();
    var cls = 'filter-check-label';
    if (l.includes('gold')) cls += ' filter-check-gold';
    if (l.includes('new'))  cls += ' filter-check-new';
    lbl.className = cls;

    var cb = document.createElement('input');
    cb.type = 'checkbox';
    cb.addEventListener('change', function() {
      var set = isSpecial ? activeSpecials : activeSizes;
      if (cb.checked) set.add(label); else set.delete(label);
      applyFilters();
    });

    lbl.appendChild(cb);
    lbl.appendChild(document.createTextNode(label));
    return lbl;
  }

  var sidebar = document.getElementById('filter-sidebar');

  // ── Sheet header: title + close button (mobile bottom sheet) ─────────────
  var sheetHeader = document.createElement('div');
  sheetHeader.className = 'filter-sheet-header';
  var sheetTitle = document.createElement('span');
  sheetTitle.className = 'filter-sheet-title';
  sheetTitle.textContent = 'Filters';
  var closeBtn2 = document.createElement('button');
  closeBtn2.className = 'filter-sidebar-close';
  closeBtn2.setAttribute('aria-label', 'Close filters');
  closeBtn2.innerHTML = '&times;';
  closeBtn2.addEventListener('click', toggleFilterSidebar);
  sheetHeader.appendChild(sheetTitle);
  sheetHeader.appendChild(closeBtn2);
  sidebar.appendChild(sheetHeader);

  // ── Size section ──────────────────────────────────────────────────────────
  sidebar.appendChild(makeSection('Size'));
  sizes.forEach(function(s) { sidebar.appendChild(makeCheckbox(s, false)); });

  // ── Special filters section ───────────────────────────────────────────────
  if (specials.length > 0) {
    var divider = document.createElement('div');
    divider.className = 'filter-sidebar-divider';
    sidebar.appendChild(divider);

    sidebar.appendChild(makeSection('Special'));
    specials.forEach(function(s) { sidebar.appendChild(makeCheckbox(s, true)); });
  }

  // ── Clear all button ──────────────────────────────────────────────────────
  var clearBtn = document.createElement('button');
  clearBtn.id = 'filter-clear-btn';
  clearBtn.className = 'filter-clear-btn';
  clearBtn.textContent = 'Clear filters';
  clearBtn.addEventListener('click', function() {
    activeSizes.clear();
    activeSpecials.clear();
    sidebar.querySelectorAll('input[type="checkbox"]').forEach(function(cb) { cb.checked = false; });
    applyFilters();
  });
  sidebar.appendChild(clearBtn);
})();

function toggleFilterSidebar() {
  var sidebar = document.getElementById('filter-sidebar');
  var overlay = document.getElementById('filter-overlay');
  var isOpen  = sidebar.classList.toggle('open');
  overlay.classList.toggle('open', isOpen);
  document.body.style.overflow = isOpen ? 'hidden' : '';
}

renderGallery();

/* ── Smooth video loop ───────────────────────────────────────────────────── */
(function() {
  const sky = document.getElementById('sky');
  sky.style.transition = 'opacity 1.2s ease';
  let fading = false;
  let lastTime = 0;

  sky.addEventListener('timeupdate', function() {
    if (!sky.duration) return;
    const remaining = sky.duration - sky.currentTime;

    // Fade out 1.4s before the end
    if (remaining < 1.4 && !fading) {
      fading = true;
      sky.style.opacity = '0';
    }

    // Detect the loop: time jumped back near zero
    if (lastTime > sky.duration - 2 && sky.currentTime < 0.8) {
      sky.style.opacity = '1';
      fading = false;
    }

    lastTime = sky.currentTime;
  });
})();

/* ── Navigation ─────────────────────────────────────────────────────────── */
function showPage(name) {
  // Hide all pages
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('page-' + name).classList.add('active');
  // Update desktop nav active state
  ['home','about','custom-order','contact'].forEach(n => {
    const el = document.getElementById('nav-' + n);
    const mob = document.getElementById('mob-' + n);
    if (el)  el.classList.toggle('active', n === name);
    if (mob) mob.classList.toggle('active', n === name);
  });
  window.scrollTo(0, 0);
}

function toggleMobile() {
  const menu = document.getElementById('nav-mobile');
  const btn  = document.getElementById('hamburger');
  menu.classList.toggle('open');
  btn.classList.toggle('open');
}

/* ── Detail Modal ───────────────────────────────────────────────────────── */
function setModalMedia(src, name) {
  const mainImg   = document.getElementById('modal-img');
  const mainVideo = document.getElementById('modal-video');
  if (isVideo(src)) {
    mainImg.style.display   = 'none';
    mainVideo.style.display = 'block';
    mainVideo.src           = src;
    mainVideo.load();
  } else {
    mainVideo.style.display = 'none';
    mainVideo.src           = '';
    mainImg.style.display   = 'block';
    mainImg.src             = src;
    mainImg.alt             = name;
  }
}

function openModal(name, images, tagline, desc, price) {
  // images may be an array or a single string (legacy)
  const mediaArray = Array.isArray(images) ? images : (images ? [images] : []);

  document.getElementById('modal-name').textContent  = name;
  document.getElementById('modal-tagline').innerHTML = tagline;
  document.getElementById('modal-price').textContent = price ? '$' + price : '';
  document.getElementById('modal-desc').innerHTML    = desc;

  setModalMedia(mediaArray[0] || '', name);

  // Build thumbnail strip for multiple media
  const thumbsEl = document.getElementById('modal-thumbs');
  thumbsEl.innerHTML = '';
  if (mediaArray.length > 1) {
    mediaArray.forEach(function(src, i) {
      var thumb = document.createElement('img');
      // For video thumbnails, show a play icon placeholder
      if (isVideo(src)) {
        thumb.src = 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'44\' height=\'44\' viewBox=\'0 0 44 44\'%3E%3Crect width=\'44\' height=\'44\' rx=\'6\' fill=\'%23203050\'/%3E%3Cpolygon points=\'16,12 34,22 16,32\' fill=\'%23fff\'/%3E%3C/svg%3E';
      } else {
        thumb.src = src;
      }
      thumb.className = 'modal-thumb' + (i === 0 ? ' active' : '');
      thumb.alt = name + ' media ' + (i + 1);
      thumb.addEventListener('click', function() {
        setModalMedia(src, name);
        thumbsEl.querySelectorAll('.modal-thumb').forEach(function(t) { t.classList.remove('active'); });
        thumb.classList.add('active');
      });
      thumbsEl.appendChild(thumb);
    });
    thumbsEl.style.display = 'flex';
  } else {
    thumbsEl.style.display = 'none';
  }

  document.getElementById('modal-overlay').classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeModal() {
  document.getElementById('modal-overlay').classList.remove('open');
  document.body.style.overflow = '';
  var v = document.getElementById('modal-video');
  if (v) { v.pause(); v.src = ''; }
}

function closeModalOnBg(e) {
  if (e.target === document.getElementById('modal-overlay')) closeModal();
}

document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

/* ── Custom Order Form ──────────────────────────────────────────────────── */
(function() {
  var ADMIN_API = 'https://mezuzah-admin.vercel.app/api/custom-order';

  var form    = document.getElementById('custom-order-form');
  var success = document.getElementById('co-success');
  var errEl   = document.getElementById('co-error');
  var submitBtn = document.getElementById('co-submit-btn');

  form.addEventListener('submit', async function(e) {
    e.preventDefault();
    submitBtn.disabled = true;
    submitBtn.textContent = 'Sending…';
    errEl.style.display = 'none';

    var data = {
      name:        document.getElementById('co-name').value.trim(),
      contact:     document.getElementById('co-contact').value.trim(),
      size:        document.getElementById('co-size').value,
      description: document.getElementById('co-description').value.trim(),
      details:     document.getElementById('co-details').value.trim(),
    };

    try {
      var res = await fetch(ADMIN_API, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data),
      });
      if (res.ok) {
        form.style.display = 'none';
        success.style.display = 'block';
      } else {
        throw new Error('Server error');
      }
    } catch {
      submitBtn.disabled = false;
      submitBtn.textContent = '\u260E\uFE0F\u00A0 Send My Request';
      errEl.style.display = 'block';
    }
  });
})();

/* ── Logo mouse drift ───────────────────────────────────────────────────── */
(function () {
  const logo   = document.querySelector('.brand-name');
  const RADIUS  = 280;   // px — how far away the mouse starts pulling
  const PULL    = 0.10;  // fraction of distance to move toward cursor

  document.addEventListener('mousemove', function (e) {
    const rect = logo.getBoundingClientRect();
    const cx   = rect.left + rect.width  / 2;
    const cy   = rect.top  + rect.height / 2;
    const dx   = e.clientX - cx;
    const dy   = e.clientY - cy;
    const dist = Math.sqrt(dx * dx + dy * dy);

    if (dist < RADIUS && dist > 1) {
      const ease = (1 - dist / RADIUS);          // 0 at edge → 1 at centre
      const mag  = ease * ease * PULL;            // quadratic falloff, feels gentle
      logo.style.transform = `translate(${dx * mag}px, ${dy * mag}px)`;
    } else {
      logo.style.transform = '';
    }
  });

  document.addEventListener('mouseleave', function () {
    logo.style.transform = '';
  });
})();
</script>
</body>
</html>
